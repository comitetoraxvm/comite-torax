{% extends "base.html" %}
{% block content %}
<h1>Cambiar contrasena</h1>

<form method="post">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

  <label>Contrasena actual</label>
  <div style="position: relative; display: inline-block; width: 100%;">
    <input type="password" name="current_password" id="current_password" required autocomplete="current-password" style="width: calc(100% - 40px); padding-right: 40px;">
    <button type="button" id="toggleCurrent" style="position: absolute; right: 5px; top: 2px; border: none; background: transparent; cursor: pointer; font-size: 20px;">ğŸ‘ï¸</button>
  </div>

  <label>Nueva contrasena</label>
  <div style="position: relative; display: inline-block; width: 100%;">
    <input type="password" name="new_password" id="new_password" required autocomplete="new-password" style="width: calc(100% - 40px); padding-right: 40px;">
    <button type="button" id="toggleNew" style="position: absolute; right: 5px; top: 2px; border: none; background: transparent; cursor: pointer; font-size: 20px;">ğŸ‘ï¸</button>
  </div>
  <p class="form-help">Debe tener 10 caracteres como minimo, con mayusculas, minusculas, numeros y simbolos.</p>

  <label>Confirmar nueva contrasena</label>
  <div style="position: relative; display: inline-block; width: 100%;">
    <input type="password" name="confirm_password" id="confirm_password" required autocomplete="new-password" style="width: calc(100% - 40px); padding-right: 40px;">
    <button type="button" id="toggleConfirm" style="position: absolute; right: 5px; top: 2px; border: none; background: transparent; cursor: pointer; font-size: 20px;">ğŸ‘ï¸</button>
  </div>

  <button type="submit">Actualizar</button>
  <a class="btn-link btn-secondary" href="{{ url_for('dashboard') }}">Cancelar</a>
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
  function setupToggle(toggleId, inputId) {
    const toggle = document.getElementById(toggleId);
    const input = document.getElementById(inputId);
    toggle.addEventListener('click', function() {
      const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
      input.setAttribute('type', type);
      this.textContent = type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸';
    });
  }

  setupToggle('toggleCurrent', 'current_password');
  setupToggle('toggleNew', 'new_password');
  setupToggle('toggleConfirm', 'confirm_password');
});
</script>
{% endblock %}
